<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>The module SYSTEM</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<P><HR>
<A NAME="0054">
<A HREF="o2rep000.html#root" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="o2rep013.html#0053" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0055" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H1>The module SYSTEM</H1>

<P>The module SYSTEM contains certain types and procedures that are necessary to implement <I>low-level</I> operations particular to a given computer and/or implementation. These include for example facilities for accessing devices that are controlled by the computer, and facilities to break the type compatibility rules otherwise imposed by the language definition. It is strongly recommended to restrict their use to specific modules (called <I>low-level</I> modules). Such modules are inherently non-portable, but easily recognized due to the identifier SYSTEM appearing in their import list. The following specifications hold for the implementation of Oberon-2 on the Ceres computer. 
<P>Module SYSTEM exports a type BYTE with the following characteristics: Variables of type CHAR or SHORTINT can be assigned to variables of type BYTE. If a formal variable parameter is of type ARRAY OF BYTE then the corresponding actual parameter may be of any type. 
<P>Another type exported by module SYSTEM is the type PTR. Variables of any pointer type may be assigned to variables of type PTR. If a formal variable parameter is of type PTR, the actual parameter may be of any pointer type. 
<P>The procedures contained in module SYSTEM are listed in the following tables. Most of them correspond to single instructions compiled as in-line code. For details, the reader is referred to the processor manual. v stands for a variable, x, y, a, and n for expressions, and T for a type. 
<P><UL>
<LI><A HREF="#0055" TARGET=body>Function procedures</A>
<LI><A HREF="#0056" TARGET=body>Proper procedures</A>
</UL>
<P><HR>
<A NAME="0055">
<A HREF="#0054" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0054" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0056" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Function procedures</H2>

<P><TABLE CELLSPACING=0>
<TR>
<TD  STYLE="padding:0px 3px;">Name </TD>
<TD  STYLE="padding:0px 3px;">Argument types </TD>
<TD  STYLE="padding:0px 3px;">Result type </TD>
<TD  STYLE="padding:0px 3px;">Function </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">&nbsp;</TD>
<TD  STYLE="padding:0px 3px;">&nbsp;</TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">ADR(v) </TD>
<TD  STYLE="padding:0px 3px;">any </TD>
<TD  STYLE="padding:0px 3px;">LONGINT </TD>
<TD  STYLE="padding:0px 3px;">address of variable v </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">BIT(a,n) </TD>
<TD  STYLE="padding:0px 3px;">a: LONGINT n: integer </TD>
<TD  STYLE="padding:0px 3px;">BOOLEAN </TD>
<TD  STYLE="padding:0px 3px;">bit n of Mem[a] </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">CC(n) </TD>
<TD  STYLE="padding:0px 3px;">integer constant </TD>
<TD  STYLE="padding:0px 3px;">BOOLEAN </TD>
<TD  STYLE="padding:0px 3px;">condition n (0&le;n&le;15) </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">LSH(x,n) </TD>
<TD  STYLE="padding:0px 3px;">x: integer, CHAR, BYTE; n: integer </TD>
<TD  STYLE="padding:0px 3px;">type of x </TD>
<TD  STYLE="padding:0px 3px;">logical shift </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">ROT(x,n) </TD>
<TD  STYLE="padding:0px 3px;">x: integer, CHAR, BYTE; n: integer </TD>
<TD  STYLE="padding:0px 3px;">type of x </TD>
<TD  STYLE="padding:0px 3px;">rotation </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">VAL(T,x) </TD>
<TD  STYLE="padding:0px 3px;">T, x: any type </TD>
<TD  STYLE="padding:0px 3px;">T </TD>
<TD  STYLE="padding:0px 3px;">x interpreted as of type T </TD>
</TR>
</TABLE>
<P><HR>
<A NAME="0056">
<A HREF="#0054" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0055" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<IMG ALT="   " SRC="empty.gif" BORDER=0></A>
<BR>
<H2>Proper procedures</H2>

<P><TABLE CELLSPACING=0>
<TR>
<TD  STYLE="padding:0px 3px;">Name </TD>
<TD  STYLE="padding:0px 3px;">Argument types </TD>
<TD  STYLE="padding:0px 3px;">Function </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">&nbsp;</TD>
<TD  STYLE="padding:0px 3px;">&nbsp;</TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">GET(a,v) </TD>
<TD  STYLE="padding:0px 3px;">a: LONGINT; v: any basic type, pointer, procedure type </TD>
<TD  STYLE="padding:0px 3px;">v := Mem[a] </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">PUT(a,x) </TD>
<TD  STYLE="padding:0px 3px;">a: LONGINT; x: any basic type, pointer, procedure type </TD>
<TD  STYLE="padding:0px 3px;">Mem[a] :=x </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">GETREG(n,v) </TD>
<TD  STYLE="padding:0px 3px;">n: integer constant; v: any basic type, pointer, procedure type </TD>
<TD  STYLE="padding:0px 3px;">v := Register n </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">PUTREG(n,x) </TD>
<TD  STYLE="padding:0px 3px;">n: integer constant; x: any basic type, pointer, procedure type </TD>
<TD  STYLE="padding:0px 3px;">Register n := x </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">MOVE(a0,a1,n) </TD>
<TD  STYLE="padding:0px 3px;">a0, a1: LONGINT; n: integer </TD>
<TD  STYLE="padding:0px 3px;">Mem[a1..a1+n-1] := Mem[a0..a0+n-1] </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;">NEW(v,n) </TD>
<TD  STYLE="padding:0px 3px;">v: any pointer; n: integer </TD>
<TD  STYLE="padding:0px 3px;">allocate storage block of n bytes assign its address to v </TD>
</TR>
</TABLE>
</BODY>
</HTML>
