<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Getting started</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<P><HR>
<A NAME="0005">
<A HREF="xm000.html#root" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="xm001.html#0004" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0006" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H1>Getting started</H1>

<P>In this and following chapters we assume that XDS is properly installed and configured (See Chapter <A HREF="xm003.html#0013" TARGET=body>Configuring the compiler</A>); the default file extensions are used. 
<P>Your XDS package contains a script file, xm<TT>work</TT>, which may be used to prepare a working directory. For more information, consult your <TT>readme.1st</TT> file from the XDS on-line documentation. 
<P><UL>
<LI><A HREF="#0006" TARGET=body>Using the Modula-2 compiler</A>
<LI><A HREF="#0007" TARGET=body>Using the Oberon-2 compiler</A>
<LI><A HREF="#0008" TARGET=body>Error reporting</A>
<LI><A HREF="#0010" TARGET=body>Building a program</A>
<LI><A HREF="#0011" TARGET=body>Debugging a program</A>
</UL>
<P><HR>
<A NAME="0006">
<A HREF="#0005" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0005" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0007" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Using the Modula-2 compiler</H2>

<P>In the working directory, use a text editor to create a file called <B>hello.mod</B>, containing the following text: 
<P><PRE>&nbsp;&nbsp;&nbsp;&nbsp;MODULE&nbsp;hello;

&nbsp;&nbsp;&nbsp;&nbsp;IMPORT&nbsp;InOut;

&nbsp;&nbsp;&nbsp;&nbsp;BEGIN
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InOut.WriteString(&quot;Hello&nbsp;World&quot;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InOut.WriteLn;
&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;hello.
</PRE>

<P>Type 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>xm</TT><TT>&nbsp;hello.mod</TT> 
<P>at the command prompt. <TT>xm</TT> will know that the Modula-2 compiler should be invoked for the source file with the extension <B>.mod</B>. The compiler heading line will appear: 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;XDS&nbsp;Modula-2&nbsp;</TT><I>version</I><TT>&nbsp;[</TT><I>code generator</I><TT>]&nbsp;&quot;hello.mod&quot;</TT> 
<P>showing which compiler has been invoked (including its version number), which code generator is being used (in square brackets) and what is its version, and finally the name of the source file <TT>xm</TT> has been asked to compile. 
<P>Assuming that you have correctly typed the source file, the compiler will then display something like 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;no&nbsp;errors,&nbsp;no&nbsp;warnings,&nbsp;lines&nbsp;&nbsp;&nbsp;15,&nbsp;time&nbsp;&nbsp;1.09</TT> 
<P>showing the number of errors, the number of source lines and the compilation time. 
<P><B>Note:</B> The XDS compiler reports are user configurable. If the lines similar to the above do not appear, check that the <A HREF="xm005.html#0137" TARGET=body>DECOR</A> equation value contains letters &lsquo;C&rsquo; (compiler heading) and &lsquo;R&rsquo; (report). 
<P><HR>
<A NAME="0007">
<A HREF="#0005" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0006" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0008" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Using the Oberon-2 compiler</H2>

<P>In our bilingual system the Modula-2 source code just shown is also perfectly valid as the Oberon-2 code. XDS allows you to use Modula-2 libraries when programming in Oberon-2 (in our case the <TT>InOut</TT> module). 
<P>As in Modula-2, this source code in Oberon-2 constitutes a <I>top-level module</I> or <I>program module</I>, but in Oberon-2, there is no syntactic distinction between a top-level module and any other module. The Oberon-2 compiler must be specifically told that this is a top-level module by using the option <A HREF="xm005.html#0103" TARGET=body>MAIN</A>. 
<P>Copy the source file to the file <B>hello.ob2</B> and type: 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT>xm<TT>&nbsp;hello.ob2&nbsp;+MAIN</TT> 
<P>The same sequence of reports will occur as that of the Modula-2 compiler, but the Oberon-2 compiler will also report whether a new symbol file was generated or not. It is also possible to override the default source file extension using <A HREF="xm005.html#0098" TARGET=body>M2</A> and <A HREF="xm005.html#0109" TARGET=body>O2</A> options: 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT>xm<TT>&nbsp;hello.mod&nbsp;+O2&nbsp;+MAIN</TT> 
<P>In this case, the Oberon-2 compiler will be invoked regardless of the file extension. 
<P><HR>
<A NAME="0008">
<A HREF="#0005" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0007" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0009" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Error reporting</H2>

<P>If either compiler detects an error in your code, an error description will be displayed. In most cases a copy of the source line will also be shown with a dollar sign <TT>&quot;$&quot;</TT> placed directly before the point at which the error occurred. The format in which XDS reports errors is user configurable (See <A HREF="xm005.html#0167" TARGET=body>Error message format specification</A>), by default it includes a file name, a position (line and column numbers) at which the error occurred, an error type indicator, which can be [E]rror, [W]arning or [F]ault, an error number, and an error message. 
<P><A NAME="0009">
<A HREF="xm001.html#0004" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0008" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0010" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Example</H5>

<P><PRE>*&nbsp;[bf.mod&nbsp;26.03&nbsp;W310]
*&nbsp;infinite&nbsp;loop
&nbsp;&nbsp;$LOOP
</PRE>

<P>
<P><HR>
<A NAME="0010">
<A HREF="#0005" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0009" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0011" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Building a program</H2>

<P>After compilation of <TT>hello</TT> program you can invoke your C compiler. It is necessary to specify the paths to header files and library (use the name of appropriate library from you package). Consult your C compiler manual for syntax of the compiler command line. 
<P><PRE>&nbsp;&nbsp;&nbsp;cc&nbsp;hello.c&nbsp;-Ic:\xds\include&nbsp;c:\xds\lib\libxds.lib
&nbsp;</PRE>

<P>Type 
<P><PRE>&nbsp;&nbsp;&nbsp;hello
&nbsp;</PRE>

<P>to run your program. 
<P>The <TT>xdsuser</TT> script creates the <TT>xcc</TT> script that can be used to compile and link a simple program. Type 
<P><PRE>&nbsp;&nbsp;&nbsp;xcc&nbsp;hello.c
&nbsp;</PRE>

<P>If your project contains more than one module, we recommend to write a project file (See <A HREF="xm004.html#0051" TARGET=body>Project files</A>) and use appropriate template file (See <A HREF="xm004.html#0054" TARGET=body>Template files</A>). The following project file contains all necessary settings: 
<P><PRE>%&nbsp;debug&nbsp;ON
-gendebug+
-lineno+
%&nbsp;specify&nbsp;template&nbsp;file
-template&nbsp;=&nbsp;xds.tem
%&nbsp;specify&nbsp;a&nbsp;name&nbsp;of&nbsp;a&nbsp;makefile
-mkfname&nbsp;=&nbsp;tmp
-mkfext&nbsp;&nbsp;=&nbsp;mkf
%&nbsp;force&nbsp;generation&nbsp;of&nbsp;the&nbsp;makefile
-makefile+
%&nbsp;call&nbsp;the&nbsp;make
-link&nbsp;=&nbsp;&quot;make&nbsp;-f&nbsp;%s&quot;,mkfname#mkfext;
%&nbsp;main&nbsp;module&nbsp;of&nbsp;the&nbsp;program
!module&nbsp;hello.mod
</PRE>

<P>It specifies the template file to use (<TT>xds.tem</TT>), the name of the makefile (<TT>tmp.mkf</TT>) and the make command line. 
<P>After successful compilation of the whole project the compiler creates the makefile and then executes the command line, specied by the <B>LINK</B> equation. The <TT>xds.tem</TT> template file defines a template for a makefile. The following invocation 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;</TT><TT>xm</TT><TT>&nbsp;hello.prj&nbsp;=p</TT> 
<P>will compile modules constituting the project (if required) and then execute the make. See <A HREF="xm004.html#0054" TARGET=body>Template files</A> for the full description of template files. See also the project files, generated by the <TT>xdsuser</TT> script. 
<P><HR>
<A NAME="0011">
<A HREF="#0005" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0010" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0012" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Debugging a program</H2>

<P>XDS allows one to use any standard debugger. However, the <I>postmorten history</I>feature of XDS run-time support may be used in may cases instead of debugger. To enable this feature the option <A HREF="xm005.html#0087" TARGET=body>GENDEBUG</A> should be set for all modules in the program; the debug mode should also be set for a C compiler and linker. 
<P>If your program is compiled in this mode, the run-time system will print a stack of procedure calls (a file name and a line number) on abnormal termination of your program. 
<P><A NAME="0012">
<A HREF="xm001.html#0004" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0011" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="xm003.html#0013" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Example</H5>

<P><PRE>MODULE&nbsp;test;

PROCEDURE&nbsp;Div(a,b:&nbsp;INTEGER):&nbsp;INTEGER;
BEGIN
&nbsp;&nbsp;RETURN&nbsp;a&nbsp;DIV&nbsp;b
END&nbsp;Div;

PROCEDURE&nbsp;Try;
&nbsp;&nbsp;VAR&nbsp;res:&nbsp;INTEGER;
BEGIN
&nbsp;&nbsp;res:=Div(1,0);
END&nbsp;Try;

BEGIN
&nbsp;&nbsp;Try;
END&nbsp;test.
</PRE>

<P>When this program is running, an exception is raised and the run-time system prints the exception location and a stack of procedure calls. If the option <A HREF="xm005.html#0096" TARGET=body>LINENO</A> is ON, all information will be reported in terms of original (Oberon-2/Modula-2) source files: 
<P><PRE>#RTS:&nbsp;No&nbsp;exception&nbsp;handler&nbsp;#6:&nbsp;zero&nbsp;or&nbsp;negative&nbsp;divisor.
test.mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5
test.mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11
test.mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15
</PRE>

<P>The exception was raised in line 6 of <TT>test.mod</TT>, the <TT>Div</TT> procedure was called from line 12, while the <TT>Try</TT> procedure was called from line 16 (module body). If the option <A HREF="xm005.html#0096" TARGET=body>LINENO</A> is OFF, all information will be reported in terms of generated C files: 
<P><PRE>#RTS:&nbsp;No&nbsp;exception&nbsp;handler&nbsp;#6:&nbsp;zero&nbsp;or&nbsp;negative&nbsp;divisor.
test.c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17
test.c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;27
test.c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36
</PRE>

<P>See <A HREF="xm011.html#0562" TARGET=body>Code generation</A> for additional details. 
<P>
</BODY>
</HTML>
