<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Optimizing a program</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<P><HR>
<A NAME="0519">
<A HREF="xc000.html#root" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="xc010.html#0518" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0520" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H1>Optimizing a program</H1>

<P>It sometimes happens with almost all compilers that the unoptimized version of a program works properly, but the optimized one does not or vice versa. If the compiler has a dozen of optimization control options it may be extremely difficult to test the compiler itself. The compiler manufacturer has to check all possible combinations of options. Fortunately, this is not the case with XDS. 
<P>Unlike many other compilers, XDS performs optimizations by default. Most of them may be turned off by setting the <A HREF="xc005.html#0099" TARGET=body>NOOPTIMIZE</A> option ON. However, the code generator always performs some low-level optimizations<FONT SIZE=2>&nbsp;/As a result, disabling optimizations optimizer significantly <I>slows down</I> the complier/ </FONT>. Instruction scheduling can be turned on or off using the <A HREF="xc005.html#0078" TARGET=body>DOREORDER</A> option. The last option that implicitly disables some of optimizations is the <A HREF="xc005.html#0083" TARGET=body>GENDEBUG</A> option. 
<P>There are still several ways to control the generated code. First of all, you have to choose what is more important for you: performance or compactness. By default, the option <A HREF="xc005.html#0109" TARGET=body>SPACE</A> is set OFF, forcing the compiler to favor the code effeciency. 
<P>To get the maximum performance, do the following: 
<UL>
 
<LI>turn <A HREF="xc005.html#0084" TARGET=body>GENFRAME</A> off </LI>
<LI>turn <A HREF="xc005.html#0109" TARGET=body>SPACE</A> off </LI>
<LI>turn <A HREF="xc005.html#0083" TARGET=body>GENDEBUG</A> off </LI>
<LI>turn <A HREF="xc005.html#0099" TARGET=body>NOOPTIMIZE</A> off </LI>
<LI>turn <A HREF="xc005.html#0078" TARGET=body>DOREORDER</A> on </LI>
<LI>set <A HREF="xc005.html#0132" TARGET=body>CPU</A> and <A HREF="xc005.html#0147" TARGET=body>MINCPU</A> equations according to your target </LI>
<LI>turn run-time checks and overflow checks off </LI>
</UL>
It is possible not to turn run-time checks off in the product versions of your programs, because the code generator usually removes redundant checks. A typical program runs only 10-15% faster with all run-time checks turned off (but the code size is usually significantly smaller). 
<P>Two options should be used with care: 
<UL>
 
<LI>the <A HREF="xc005.html#0108" TARGET=body>PROCINLINE</A> option allows the compiler to expand procedures in-line. As a rule, switching the option ON leads to faster but bigger code. However, the effect of this option depends on your programming style (size of procedures, etc). </LI>
<LI>the <A HREF="xc005.html#0100" TARGET=body>NOPTRALIAS</A> option allows the compiler to assume that there is no pointer aliasing, i.e. there are no pointers bounded to non-structure variables. The code quality is better if the option is ON. </LI>
</UL>

<P><A NAME="0520">
<A HREF="xc009.html#0500" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0519" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="xc012.html#0521" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Example of project file for maximum performance</H5>

<P><PRE>&nbsp;&nbsp;&nbsp;&nbsp;-alignment=4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;is&nbsp;unnecessary&nbsp;under&nbsp;Linux
&nbsp;&nbsp;&nbsp;&nbsp;-noptralias+
&nbsp;&nbsp;&nbsp;&nbsp;-procinline+
&nbsp;&nbsp;&nbsp;&nbsp;-space
&nbsp;&nbsp;&nbsp;&nbsp;-doreorder+
&nbsp;&nbsp;&nbsp;&nbsp;-cpu=486
&nbsp;&nbsp;&nbsp;&nbsp;-genframe

&nbsp;&nbsp;&nbsp;&nbsp;-checkindex
&nbsp;&nbsp;&nbsp;&nbsp;-checkrange
&nbsp;&nbsp;&nbsp;&nbsp;-checknil
&nbsp;&nbsp;&nbsp;&nbsp;-ioverflow
&nbsp;&nbsp;&nbsp;&nbsp;-coverflow

&nbsp;&nbsp;&nbsp;&nbsp;-gendebug
&nbsp;&nbsp;&nbsp;&nbsp;-genhistory
&nbsp;&nbsp;&nbsp;&nbsp;-lineno
&nbsp;&nbsp;&nbsp;&nbsp;!module&nbsp;Foo.mod
</PRE>

<P>In some cases, it may be better to set different options for different modules in your program. See <TT>dry.mod</TT> from XDS samples. 
<P>
</BODY>
</HTML>
