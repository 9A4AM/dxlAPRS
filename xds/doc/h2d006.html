<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Project files</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<P><HR>
<A NAME="0054">
<A HREF="h2d000.html#root" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="h2d005.html#0053" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0055" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H1>Project files</H1>

<P><UL>
<LI><A HREF="#0055" TARGET=body>Overview</A>
<LI><A HREF="#0057" TARGET=body>Project file contents</A>
</UL>
<P><HR>
<A NAME="0055">
<A HREF="#0054" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0054" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0056" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Overview</H2>

<P>The most powerful and multi-purpose feature of H2D is the <I>project file</I>, which name may be specified at the command line after <TT>=p</TT>. 
<P>The project file may be used: 
<UL>
 
<LI>To translate a set of header files at once, using the same option settings: 
<P><TT>-BACKEND=C</TT><BR>
<TT>-GENROVARS+</TT><BR>
<TT>!module&nbsp;&lt;stdio.h&gt;</TT><BR>
<TT>!module&nbsp;&lt;stdlib.h&gt;</TT> </LI>
<LI>To map calling/naming convention qualifiers used by a particular C compiler to those supported by H2D (see <A HREF="h2d004.html#0029" TARGET=body>Non-standard qualifiers</A>), or to make them ignorable: 
<P><TT>!header&nbsp;&lt;*.h&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;define&nbsp;for&nbsp;all&nbsp;headers&nbsp;*/</TT><BR>
<TT>#define&nbsp;_System&nbsp;syscall</TT><BR>
<TT>#define&nbsp;far</TT><BR>
<TT>!end</TT> </LI>
<LI>To define macros which are predefined by a particular C compiler or are used in conditional compilation preprocessor directives (see <A HREF="h2d004.html#0034" TARGET=body>Conditional compilation</A>): 
<P><TT>!header&nbsp;&lt;*.h&gt;</TT><BR>
<TT>#define&nbsp;__WATCOM_C__</TT><BR>
<TT>#define&nbsp;INCL_DOS</TT><BR>
<TT>!end</TT> </LI>
<LI>To declare type synonyms in order to prevent H2D from automatic type declarations (see <A HREF="h2d004.html#0027" TARGET=body>Function prototypes</A> and <A HREF="h2d004.html#0021" TARGET=body>Types</A>): 
<P><TT>!header&nbsp;&lt;*.h&gt;</TT><BR>
<TT>typedef&nbsp;char&nbsp;*String&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;no&nbsp;more&nbsp;PtrChar&nbsp;*/</TT><BR>
<TT>!end</TT> </LI>
<LI>To collect non-standard preprocessor directives in order to keep original header files intact (see <A HREF="#0057" TARGET=body>Project file contents</A>): 
<P><TT>!header&nbsp;&lt;string.h&gt;</TT><BR>
<TT>#variant&nbsp;strlen(0)&nbsp;:&nbsp;ARRAY</TT><BR>
<TT>!end</TT> </LI>
</UL>

<P><UL>
<LI><A HREF="#0056" TARGET=body>Example</A>
</UL>
<P><HR>
<A NAME="0056">
<A HREF="#0055" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0055" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0057" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>Example</H3>

<P>The header files <TT>a.h</TT> and <TT>m1.h</TT>: 
<P><PRE>/*&nbsp;a.h&nbsp;*/
&nbsp;&nbsp;#include&nbsp;&quot;m1.h&quot;
&nbsp;&nbsp;#define&nbsp;constant1&nbsp;0x11u
&nbsp;&nbsp;__PASCAL&nbsp;function3(&nbsp;float&nbsp;*&nbsp;arg0,&nbsp;unsigned&nbsp;long&nbsp;arg1&nbsp;);
/*&nbsp;end&nbsp;a.h&nbsp;*/
</PRE>

<P><PRE>/*&nbsp;m1.h&nbsp;*/
&nbsp;&nbsp;#define&nbsp;constant2&nbsp;0x111u
&nbsp;&nbsp;__PASCAL&nbsp;function1(&nbsp;float&nbsp;*&nbsp;arg0,&nbsp;float&nbsp;*&nbsp;arg1&nbsp;);
&nbsp;&nbsp;function2(&nbsp;unsigned&nbsp;long&nbsp;arg0,&nbsp;unsigned&nbsp;long&nbsp;arg1&nbsp;);
/*&nbsp;end&nbsp;m1.h&nbsp;*/
</PRE>

<P>with project file <TT>p.h2d</TT>: 
<P><PRE>!header&nbsp;&quot;*.h&quot;
&nbsp;&nbsp;#define&nbsp;__PASCAL&nbsp;pascal
!end
!header&nbsp;&quot;a.h&quot;
&nbsp;&nbsp;#merge&nbsp;&quot;m1.h&quot;
!end
!header&nbsp;&quot;m1.h&quot;
&nbsp;&nbsp;#variant&nbsp;function1&nbsp;(1)&nbsp;:&nbsp;VAR
&nbsp;&nbsp;#variant&nbsp;constant2&nbsp;:&nbsp;BITSET
&nbsp;&nbsp;#variant&nbsp;function2&nbsp;(1)&nbsp;:&nbsp;BITSET
!end
!module&nbsp;&quot;a.h&quot;
</PRE>

<P>are translated to 
<P><PRE>(*&nbsp;************************&nbsp;*)
(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m1.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)
(*&nbsp;************************&nbsp;*)
CONST
&nbsp;&nbsp;constant2&nbsp;=&nbsp;{0,&nbsp;4,&nbsp;8};
&lt;*-&nbsp;GENTYPEDEF&nbsp;*&gt;
TYPE
&nbsp;&nbsp;PtrFloat&nbsp;=&nbsp;POINTER&nbsp;TO&nbsp;REAL;
PROCEDURE&nbsp;[&quot;StdCall&quot;]&nbsp;function1&nbsp;(&nbsp;arg0:&nbsp;PtrFloat;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VAR&nbsp;arg1:&nbsp;REAL&nbsp;):&nbsp;SYSTEM.int;
PROCEDURE&nbsp;function2&nbsp;(&nbsp;arg0:&nbsp;LONGCARD;&nbsp;arg1:&nbsp;BITSET&nbsp;):&nbsp;SYSTEM.int;
(*&nbsp;***********************&nbsp;*)
(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)
(*&nbsp;***********************&nbsp;*)
CONST
&nbsp;&nbsp;constant1&nbsp;=&nbsp;111H;
PROCEDURE&nbsp;[&quot;StdCall&quot;]&nbsp;function3&nbsp;(&nbsp;arg0:&nbsp;PtrFloat;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg1:&nbsp;LONGCARD&nbsp;):&nbsp;SYSTEM.int;
</PRE>

<P>
<P><HR>
<A NAME="0057">
<A HREF="#0054" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0056" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0058" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Project file contents</H2>

<P>A project file may contain options settings and directives. Option settings in a project file override settings in the configuration file. 
<P>H2D recognizes the following directives in project files: <TT>!header</TT>, <TT>!module</TT>, and <TT>!name</TT>, which are described is the following sections. 
<P><UL>
<LI><A HREF="#0058" TARGET=body>!header</A>
<LI><A HREF="#0059" TARGET=body>!module</A>
<LI><A HREF="#0061" TARGET=body>!name</A>
</UL>
<P><HR>
<A NAME="0058">
<A HREF="#0057" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0057" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0059" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>!header</H3>

<P><PRE>!header&nbsp;(&nbsp;'&lt;'&nbsp;Pattern&nbsp;'&gt;'&nbsp;|&nbsp;'&quot;'&nbsp;Pattern&nbsp;'&quot;'&nbsp;)
&nbsp;&nbsp;Prologue
[
!footer
&nbsp;&nbsp;Epilogue
]
!end
</PRE>

<P><TT>Pattern</TT> is a regular expression (see <A HREF="h2d002.html#0008" TARGET=body>Redirection file</A>) representing a set of file names. <TT>Prologue</TT> and <TT>Epilogue</TT> are arbitrary sequences of C language tokens. <TT>Prologue</TT> is inserted at the beginning of any header file which name matches <TT>Pattern</TT>; <TT>Epilogue</TT> is appended to its end. <TT>!footer</TT> and <TT>Epilogue</TT> may be omitted. 
<P>If a header file name matches <TT>Pattern</TT> in more than one <TT>!header</TT> directive, their <TT>Prologue</TT> and <TT>Epilogue</TT> sections are merged. 
<P><TT>Prologue</TT> usually contains: 
<UL>
 
<LI><TT>#merge</TT> and <TT>#variant</TT> directives </LI>
<LI>Predefined macros of a particular C compiler </LI>
<LI>Type synonym declarations to prevent automatic type names generation </LI>
</UL>

<P><B>Note:</B> If there are <TT>#include</TT> directives in either <TT>Prolodue</TT> or <TT>Epilogue</TT> ensure that names of the included files do not match <TT>Pattern</TT>, to avoid recursive inclusion: 
<P><PRE>!header&nbsp;&lt;*.h&amp;^mytypes.h&gt;
#include&nbsp;&lt;mytypes.h&gt;
!end
</PRE>

<P><HR>
<A NAME="0059">
<A HREF="#0057" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0058" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0060" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>!module</H3>

<P><PRE>!module&nbsp;(&nbsp;&lt;file_name&gt;&nbsp;|&nbsp;&quot;file_name&quot;&nbsp;)
</PRE>

<P>The <TT>!module</TT> directive is used to specify header files which are to be translated when H2D processes the project file. 
<P>Translating more than one header at once has one more advantage. A header file name may occur multiple times in <TT>#include</TT> directives. H2D keeps information about each translated header in memory, and if an already transtaled header file is encountered, it is not processed again. <B>Note:</B> In this case H2D requires more memory. 
<P><UL>
<LI><A HREF="#0060" TARGET=body>Example</A>
</UL>
<P><HR>
<A NAME="0060">
<A HREF="#0059" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0059" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0061" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H4>Example</H4>

<P><PRE>!module&nbsp;&lt;ctype.h&gt;
!module&nbsp;&lt;math.h&gt;
!module&nbsp;&lt;stdio.h&gt;
!module&nbsp;&lt;stdlib.h&gt;
!module&nbsp;&lt;string.h&gt;
</PRE>

<P><HR>
<A NAME="0061">
<A HREF="#0057" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0060" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0062" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>!name</H3>

<P><PRE>!name&nbsp;(&nbsp;'&lt;'&nbsp;file_name&nbsp;'&gt;'&nbsp;|&nbsp;'&quot;'&nbsp;file_name&nbsp;'&quot;'&nbsp;)&nbsp;identifier
</PRE>

<P>H2D replaces <TT>file_name</TT> with <TT>identifier</TT> when generating module names. This may be useful when <TT>file_name</TT> contains special characters (e.g. <TT>my-header.h</TT>), or when there are headers with equal names in different directories. See also the description of the <A HREF="h2d007.html#0073" TARGET=body>GENLONGNAMES</A> option. 
<P><UL>
<LI><A HREF="#0062" TARGET=body>Example</A>
</UL>
<P><HR>
<A NAME="0062">
<A HREF="#0061" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0061" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="h2d007.html#0063" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H4>Example</H4>

<P><TT>!name&nbsp;&lt;errno.h&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errno</TT><BR>
<TT>!name&nbsp;&lt;sys\errno.h&gt;&nbsp;syserrno</TT> 
<P>
</BODY>
</HTML>
