<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>Configuring the compiler</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<P><HR>
<A NAME="0013">
<A HREF="xm000.html#root" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="xm002.html#0012" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0014" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H1>Configuring the compiler</H1>

<P><UL>
<LI><A HREF="#0014" TARGET=body>System search paths</A>
<LI><A HREF="#0015" TARGET=body>Working configuration</A>
<LI><A HREF="#0017" TARGET=body>XDS memory usage</A>
<LI><A HREF="#0018" TARGET=body>Directory hierarchies</A>
<LI><A HREF="#0019" TARGET=body>XDS search paths</A>
<LI><A HREF="#0024" TARGET=body>Options</A>
<LI><A HREF="#0026" TARGET=body>Configuration file</A>
<LI><A HREF="#0027" TARGET=body>Filename extensions</A>
<LI><A HREF="#0029" TARGET=body>Customizing compiler messages</A>
<LI><A HREF="#0030" TARGET=body>XDS and your C compiler</A>
</UL>
<P><HR>
<A NAME="0014">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0013" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0015" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>System search paths</H2>

<P>In order for your operating system to know where to find the executable binary files which constitute the XDS package, you must set your operating system search paths appropriately. See the Read Me First file from your on-line documentation. 
<P><HR>
<A NAME="0015">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0014" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0016" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Working configuration</H2>

<P>The core part of XDS is the <TT>xm</TT>utility, which combines the project subsystem with Modula-2 and Oberon-2 compilers, accompanied with a set of system files<FONT SIZE=2>&nbsp;/A name of a system file is constructed from the name of the compiler utility and the correspondent filename extension. If you rename the <TT>xm</TT> utility, you should also rename all system files./ </FONT>: 
<P><TABLE CELLSPACING=0>
<TR>
<TD  STYLE="padding:0px 3px;"><B>xm.red</B></TD>
<TD  STYLE="padding:0px 3px;"><A HREF="#0020" TARGET=body>Search path redirection file</A> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><B>xm.cfg</B></TD>
<TD  STYLE="padding:0px 3px;"><A HREF="#0026" TARGET=body>Configuration file</A> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><B>xm.msg</B></TD>
<TD  STYLE="padding:0px 3px;"><A HREF="#0029" TARGET=body>Texts of error messages</A> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><B>xm.kwd</B></TD>
<TD  STYLE="padding:0px 3px;">List of C/C++ keywords and reserved identifiers </TD>
</TR>
</TABLE>
<P>Being invoked, <TT>xm</TT> tries to locate the <TT>xm.red</TT> file, first in the current directory and then in the directory where <TT>xm</TT> is placed (so called <I>master redirection file</I>). 
<P>Other system files are sought by paths defined in <TT>xm.red</TT>. If <TT>xm.red</TT> is not found, or it does not contain paths for a particular system file, that file is sought in the current directory and then in the directory where the <TT>xm</TT> utility resides. 
<P>A configuration file contains settings that are relevant for all projects. Project specific settings are defined in project files (See <A HREF="xm004.html#0051" TARGET=body>Project files</A>). A so-called template file is used to automate the program build process (See <A HREF="xm004.html#0054" TARGET=body>Template files</A>). 
<P>A redirection file, a configuration file, and, optionally, a project file and a template file constitute a working environment for a single execution of the <TT>xm</TT> utility. The compiler preprocesses files of all these types as described in <A HREF="xm004.html#0050" TARGET=body>Control file preprocessing</A>. 
<P>Portable software development is one of the main goals of XDS. To achieve that goal, not only the source texts should be portable between various platforms, but the environment also. XDS introduces a portable notation for file names that may be used in all system files and on the command line. The portable notation combines DOS-like and Unix-like notations (file names are case sensitive): 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;drive_letter&nbsp;&quot;:&quot;&nbsp;]&nbsp;unix_file_name</TT> 
<P><A NAME="0016">
<A HREF="xm001.html#0004" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0015" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0017" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Examples</H5>

<P><PRE>&nbsp;&nbsp;&nbsp;&nbsp;c:/xds/bin
&nbsp;&nbsp;&nbsp;&nbsp;/mnt/users/alex/cur_pro
&nbsp;&nbsp;&nbsp;&nbsp;cur_pro/sources
</PRE>

<P>Along with the <I>base directory</I> macro (See <A HREF="xm004.html#0050" TARGET=body>Control file preprocessing</A>) this portable notation allows to write all environment files in a platform independent and location independent manner. 
<P><HR>
<A NAME="0017">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0016" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0018" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>XDS memory usage</H2>

<P>XDS compilers are written in Oberon-2<FONT SIZE=2>&nbsp;/We use XDS in most of our developments./ </FONT>. As any other Oberon-2 program, a compiler uses garbage collector to deallocate memory. These days, most operating systems, including Windows and Linux, provide virtual memory. If an Oberon-2 program exceeds the amount of avaiable physical memory, the garbage collector becomes inefficient. Thus, it is important to restrict the amount of memory that can be used by an Oberon-2 program. As a rule, such restriction is set in the configuration or project file (See the <A HREF="xm005.html#0150" TARGET=body>HEAPLIMIT</A> equation). You may also let the run-time system determine the proper heap size at run time by setting <A HREF="xm005.html#0150" TARGET=body>HEAPLIMIT</A> to zero. 
<P>Similarly, the equation <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> should be used to control the amount of memory used by a compiler itself. That equation is set in the configuration file (<TT>xm.cfg</TT>). We recommend to set it according to the amount of physical memory in your computer: 
<P><TABLE CELLSPACING=0>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px">RAM in megabytes </TD>
<TD ALIGN=RIGHT STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px">COMPILERHEAP </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;">32-64 </TD>
<TD ALIGN=RIGHT STYLE="padding:0px 3px;">16000000 </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;">64-128 </TD>
<TD ALIGN=RIGHT STYLE="padding:0px 3px;">48000000 </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;">more than 128 </TD>
<TD ALIGN=RIGHT STYLE="padding:0px 3px;">96000000 </TD>
</TR>
</TABLE>
<P>It may be necessary to increase <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> if you get the &quot;<TT>out&nbsp;of&nbsp;memory</TT>&quot; message (???). It is very unlikely, if <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> is set to 16 megabytes or more. Your compilation unit should be very large to exceed this memory limit. <B>Note:</B> if you are using Win32 or X Window API definition modules, set <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> to at least 16 megabytes. 
<P>Vice versa, if you notice unusually intensive disk activity when compiling your program, it may indicate that the value of the <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> equation is too large for your system configuration. 
<P>Set <A HREF="xm005.html#0135" TARGET=body>COMPILERHEAP</A> to zero if would prefer the compiler to dynamically adjust heap size in accordance with system load. 
<P>See <A HREF="xm009.html#0489" TARGET=body>Memory management</A> for more information on XDS memory management. 
<P><HR>
<A NAME="0018">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0017" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0019" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Directory hierarchies</H2>

<P>XDS compilers give you complete freedom over where you store both your source code files and any files which compilers create for you. It is advisable to work in a project oriented fashion &mdash; i.e. to have a separate directory hierarchy for each independent project. 
<P>Due to the re-usable nature of modules written in Modula-2 or Oberon-2, it is wise to keep a separate directory for those files which are to be made available to several projects. We will call such files the <I>library</I> files. 
<P>We recommend you to have a separate working directory for each project. You can also create subdirectories to store symbol files and generated code files. We recommend to use the supplied script or its customized version to create all subdirectories and, optionally, a local redirection file or a project file. Refer to the &quot;Read Me First&quot; file for more information about that script. 
<P><HR>
<A NAME="0019">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0018" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0020" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>XDS search paths</H2>

<P>Upon activation, xm looks for a file called <TT>xm.red</TT> &mdash; a <I>redirection file</I>. That file defines paths by which all other files are sought. If a redirection file was not found in the current directory, the master redirection file is loaded from the directory where xm executable is placed. 
<P><UL>
<LI><A HREF="#0020" TARGET=body>Redirection file</A>
<LI><A HREF="#0022" TARGET=body>Regular expression</A>
</UL>
<P><HR>
<A NAME="0020">
<A HREF="#0019" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0019" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0021" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>Redirection file</H3>

<P>A redirection file consists of several lines of the form<FONT SIZE=2>&nbsp;/See also <A HREF="xm004.html#0050" TARGET=body></FONT>Control file preprocessing<FONT SIZE=2></A>/ </FONT>: 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;pattern&nbsp;=&nbsp;directory&nbsp;{&quot;;&quot;&nbsp;directory}</TT> 
<P><TT>pattern</TT> is a regular expression with which names of files xm has to open or create are compared. A pattern usually contains wildcard symbols &rsquo;*&rsquo; and &rsquo;?&rsquo;, where 
<P><TABLE CELLSPACING=0>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px"><B>Symbol </B></TD>
<TD  STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px"><B>Matches </B></TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>* </TT></TD>
<TD  STYLE="padding:0px 3px;">any (possibly empty) string </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>? </TT></TD>
<TD  STYLE="padding:0px 3px;">any single character. </TD>
</TR>
</TABLE>
<P>For a full description of regular expressions see <A HREF="#0022" TARGET=body>Regular expression</A>. 
<P>It is also possible to have comment lines in a redirection file. A comment line should start with the &quot;<TT>%</TT>&quot; symbol. 
<P>A <A HREF="#0015" TARGET=body>portable notation</A> is used for directory names or paths. A path may be absolute or relative, i.e. may consist of full names such as 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;/usr/myproj/def</TT> 
<P>or of names relative to the current directory, such as 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;src/common</TT> 
<P>denoting the directory <TT>src/common</TT> which is a subdirectory of the current directory. A single dot as a pathname represents the current directory, a double dot represents the parent, i.e. the directory which has the current directory as a subdirectory. 
<P>The base directory macro <TT>$!</TT> can be used in a directory name. It denotes the path to the redirection file. If the redirection file is placed in the <TT>/usr/alex</TT> directory then <TT>$!/sym</TT> denotes the <TT>/usr/alex/sym</TT> directory, whereas <TT>$!/..</TT> denotes the <TT>/usr</TT> directory. 
<P>For any file, its name is sequentially matched with a pattern of each line. If a match was found, the file is sought in the first of the directories listed on that line, then in the second directory, and so on until either the file is found, or there are no more directories to search or there are no more patterns to match. 
<P>If <TT>xm</TT> could not locate a file which is needed for correct operation, e.g. a necessary symbol file, it terminates with an appropriate error message. 
<P>When creating a file, <TT>xm</TT> also uses redirection, and its behavior is determined by the <A HREF="xm005.html#0114" TARGET=body>OVERWRITE</A> option. If the option was set ON, <TT>xm</TT> first searches for the file it is about to create using redirection. Then, if the file was found, <TT>xm</TT> overwrites it. If no file of the same name as the one which <TT>xm</TT> needs to create was found or the <A HREF="xm005.html#0114" TARGET=body>OVERWRITE</A> option was set OFF, then the file is be created in the directory which appears first in the search path list which pattern matched the filename. 
<P>If no pattern matching a given filename can be found in the <TT>xm.red</TT> file, then the file will be read from (or written to) the current working directory. 
<P><B>Note:</B> If a pattern matching a given filename is found then <TT>xm</TT> will <I>not</I> look into the current directory, unless it is explicitly specified in the search path. 
<P>The following entry in <TT>xm.red</TT> would be appropriate for searching for the symbol files (provided that symbol files have the extension <B>.sym</B>). 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;*.sym=sym;/usr/xds/sym;.</TT> 
<P>Given the above redirection, the compiler will first search for symbol files in the directory <TT>sym</TT> which is a subdirectory of the current working directory; then in the directory storing the XDS library symbol files and then in the current directory. 
<P><A NAME="0021">
<A HREF="#0020" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0020" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0022" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Example of a redirection file:</H5>

<P><PRE>&nbsp;&nbsp;&nbsp;&nbsp;xm.msg&nbsp;=&nbsp;/xds/bin
&nbsp;&nbsp;&nbsp;&nbsp;*.mod&nbsp;=&nbsp;mod
&nbsp;&nbsp;&nbsp;&nbsp;*.def&nbsp;=&nbsp;def
&nbsp;&nbsp;&nbsp;&nbsp;*.ob2&nbsp;=&nbsp;oberon
&nbsp;&nbsp;&nbsp;&nbsp;*.c&nbsp;&nbsp;&nbsp;=&nbsp;c
&nbsp;&nbsp;&nbsp;&nbsp;*.h&nbsp;&nbsp;&nbsp;=&nbsp;include;/xds/include
&nbsp;&nbsp;&nbsp;&nbsp;*.sym&nbsp;=&nbsp;sym;&nbsp;/xds/sym/C
</PRE>

<P><HR>
<A NAME="0022">
<A HREF="#0019" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0021" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0023" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>Regular expression</H3>

<P>A regular expression is a string containing certain special symbols: 
<P ALIGN=CENTER><TABLE CELLSPACING=0>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px"><B>Sequence </B></TD>
<TD  STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px"><B>Denotes </B></TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>*</TT> </TD>
<TD  STYLE="padding:0px 3px;">an arbitrary sequence of any characters, possibly empty </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;">&nbsp;</TD>
<TD  STYLE="padding:0px 3px;">(equivalent to <TT>{\000-\377}</TT> expression) </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>?</TT> </TD>
<TD  STYLE="padding:0px 3px;">any single character </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;">&nbsp;</TD>
<TD  STYLE="padding:0px 3px;">(equivalent to <TT>[\000-\377]</TT> expression) </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>[...]</TT> </TD>
<TD  STYLE="padding:0px 3px;">one of the listed characters </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>{...}</TT> </TD>
<TD  STYLE="padding:0px 3px;">an arbitrary sequence of the listed characters, possibly empty </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>\nnn</TT> </TD>
<TD  STYLE="padding:0px 3px;">the ASCII character with octal code <TT>nnn</TT>, where n is <TT>[0-7]</TT> </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>&amp;</TT> </TD>
<TD  STYLE="padding:0px 3px;">the logical operation AND </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>|</TT> </TD>
<TD  STYLE="padding:0px 3px;">the logical operation OR </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>^</TT> </TD>
<TD  STYLE="padding:0px 3px;">the logical operation NOT </TD>
</TR>
<TR>
<TD ALIGN=CENTER STYLE="padding:0px 3px;"><TT>(...)</TT> </TD>
<TD  STYLE="padding:0px 3px;">the priority of operations </TD>
</TR>
</TABLE>
<P>A sequence of the form <TT>a-b</TT> used within either <TT>[]</TT> or <TT>{}</TT> brackets denotes all characters from <TT>a</TT> to <TT>b</TT>. 
<P><A NAME="0023">
<A HREF="#0022" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0022" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0024" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Examples</H5>
<DL>
 
<DT><TT>*.def</TT></DT>
<DD> <BR>
all files which extension is <TT>.def</TT> </DD>
<DT><TT>project.*</TT></DT>
<DD> <BR>
files which name is <TT>project</TT> with an arbitrary extension </DD>
<DT><TT>*.def|*.mod</TT></DT>
<DD> <BR>
files which extension is either <TT>.def</TT> or <TT>.mod</TT> </DD>
<DT><TT>{a-z}*X.def</TT></DT>
<DD> <BR>
files starting with any sequence of letters, ending in one final &quot;X&quot; and having the extension <TT>.def</TT>. </DD>
</DL>

<P><HR>
<A NAME="0024">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0023" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0025" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Options</H2>

<P>A rich set of <TT>xm</TT> options allows one to control the source language, code generation and internal limits and settings. We distinguish between boolean options (or just options) and equations. An <I>option</I> can be set ON (TRUE) or OFF (FALSE), while an <I>equation</I> value is a string. In this chapter we describe only the syntax of setup directive. The full list of <TT>xm</TT> options and equations is provided in the Chapter <A HREF="xm005.html#0059" TARGET=body>Compiler options and equations</A>. 
<P>Options and equations may be set in a <A HREF="#0026" TARGET=body>configuration file</A>, <A HREF="xm004.html#0036" TARGET=body>on the command line</A>, in a <A HREF="xm004.html#0051" TARGET=body>project file</A>), and in the source text (see <A HREF="xm007.html#0456" TARGET=body>Source code directives</A>). 
<P>The same syntax of a setup directive is used in configuration and project files and on the command line. The only difference is that arbitrary spaces are permitted in files, but not on the command line. Option and equation names are case independent. 
<P><PRE>SetupDirective&nbsp;&nbsp;&nbsp;=&nbsp;SetOption
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;SetEquation
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;DeclareOption
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;DeclareEquation
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;DeclareSynonym
SetOption&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'-'&nbsp;name&nbsp;('+'|&nbsp;'-')
SetEquation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'-'&nbsp;name&nbsp;'='&nbsp;[&nbsp;value&nbsp;]
DeclareOption&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'-'&nbsp;name&nbsp;':'&nbsp;[&nbsp;'+'&nbsp;|&nbsp;'-'&nbsp;]
DeclareEquation&nbsp;&nbsp;=&nbsp;'-'&nbsp;name&nbsp;':='&nbsp;[&nbsp;value&nbsp;]
DeclareSynonym&nbsp;&nbsp;&nbsp;=&nbsp;'-'&nbsp;name&nbsp;'::'&nbsp;name
</PRE>

<P>All options and equations used by <TT>xm</TT> are predeclared. 
<P>The <TT>DeclareSynonym</TT> directive allows one to use a different name (e.g. shorter name) for an option or equation. 
<P>The old version of <TT>SetOption</TT> is also supported for convenience: 
<P><TT>OldSetOption&nbsp;&nbsp;&nbsp;=&nbsp;'+'&nbsp;name&nbsp;|&nbsp;'-'&nbsp;name</TT> 
<P><A NAME="0025">
<A HREF="#0022" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0024" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0026" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Examples</H5>

<P><TABLE CELLSPACING=0>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid solid none;border-width: 0px 1px 1px 0px"><B>Directive </B></TD>
<TD  STYLE="padding:0px 3px;border-style: none none solid none;border-width: 0px 0px 1px 0px"><B>Meaning </B></TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-M2Extensions+</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>M2EXTENSION</B> is set ON </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-Oberon=o2</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>OBERON</B> is set to <TT>&quot;o2&quot;</TT> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-debug:</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>DEBUG</B> is declared and set OFF </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-Demo:+</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>DEMO</B> is declared and set ON </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-Vers:=1.0</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>VERS</B> is declared and set to <TT>&quot;1.0&quot;</TT> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>-A::genasm</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>A</B> is declared as a synonym for <B>GENASM</B> </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;border-style: none solid none none;border-width: 0px 1px 0px 0px"><TT>+m2extensions</TT> </TD>
<TD  STYLE="padding:0px 3px;"><B>M2EXTENSIONS</B> is set OFF </TD>
</TR>
</TABLE>
<P><HR>
<A NAME="0026">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0025" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0027" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Configuration file</H2>

<P>A configuration file can be used to set the default values of options and equations (see Chapter <A HREF="xm005.html#0059" TARGET=body>Compiler options and equations</A>) for all projects (or a set of projects). A non-empty line of a configuration file may contain a single compiler option or equation setup directive (see <A HREF="#0024" TARGET=body>Options</A>) or a comment. Arbitrary spaces are permitted. The &quot;<TT>%</TT>&quot; character indicates a comment; it causes the rest of a line to be discarded. <B>Note:</B> the comment character can not be used when setting an equation. 
<P>The <I>master configuration file</I>, placed along with the <TT>xm</TT> utility, usually contains default settings for the target platform and declarations of platform-specific options and equations, which may be used in project and template files. 
<P><P ALIGN=CENTER><B><A NAME=figure1>Figure 1. </A></B>A sample configuration file

<P><PRE>&nbsp;&nbsp;%&nbsp;this&nbsp;is&nbsp;a&nbsp;comment&nbsp;line
&nbsp;&nbsp;%&nbsp;Set&nbsp;equation:
&nbsp;&nbsp;&nbsp;-&nbsp;BSDef&nbsp;=&nbsp;df
&nbsp;&nbsp;%&nbsp;Set&nbsp;predeclared&nbsp;options:
&nbsp;&nbsp;&nbsp;-&nbsp;RangeCheck&nbsp;-&nbsp;&nbsp;&nbsp;%&nbsp;turn&nbsp;range&nbsp;checks&nbsp;off
&nbsp;&nbsp;&nbsp;-&nbsp;M2EXTENSIONS&nbsp;+&nbsp;%&nbsp;allow&nbsp;Modula-2&nbsp;extensions
&nbsp;&nbsp;%&nbsp;Declare&nbsp;new&nbsp;options:
&nbsp;&nbsp;&nbsp;-iPentium:+
&nbsp;&nbsp;&nbsp;-i80486:-
&nbsp;&nbsp;&nbsp;-i80386:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;is&nbsp;equal&nbsp;to&nbsp;-i80386:-
&nbsp;&nbsp;%&nbsp;Declare&nbsp;synonym:
&nbsp;&nbsp;&nbsp;-N&nbsp;::&nbsp;checknil
&nbsp;&nbsp;&nbsp;-N&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;disallow&nbsp;NIL&nbsp;checks
&nbsp;&nbsp;%&nbsp;end&nbsp;of&nbsp;configuration&nbsp;file
</PRE>

<P>
<P><HR>
<A NAME="0027">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0026" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0028" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Filename extensions</H2>

<P><TT>xm</TT> allows you to define what you want to be the standard extensions for each particular type of file. For instance, you may prefer your Oberon-2 source code texts to end in <B>.o2</B> instead of <B>.ob2</B>. 
<P>We recommend to either use the traditional extensions or at least the extensions which describe the kind of file they refer to, and keep same extensions across all your projects. For example, use <B>.def</B> and <B>.mod</B> for Modula-2 modules, <B>.ob2</B> for Oberon-2 modules, etc. 
<P>Certain other factors must also influence your decisions. Traditionally, Oberon-2 pseudo-definition modules (as created by a browser) are extended with a <B>.def</B>. With XDS, this may conflict with the extension used for Modula-2 definition modules. Therefore, <A HREF="xm004.html#0041" TARGET=body>the XDS browser</A> uses the extension <B>.odf</B> by default. 
<P>The following filename extensions are usually defined in the configuration file: 
<P><TABLE CELLSPACING=0>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0138" TARGET=body>DEF</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for Modula-2 definition modules </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0155" TARGET=body>MOD</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for Modula-2 implementation modules </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0157" TARGET=body>OBERON</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for Oberon-2 modules </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0131" TARGET=body>BSDEF</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for Oberon-2 pseudo definition modules </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0149" TARGET=body>HEADER</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for C header files </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0133" TARGET=body>CODE</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for generated code files </TD>
</TR>
<TR>
<TD  STYLE="padding:0px 3px;"><A HREF="xm005.html#0164" TARGET=body>SYM</A> </TD>
<TD  STYLE="padding:0px 3px;">extension for symbol files </TD>
</TR>
</TABLE>
<P>See Table <A HREF=#table5>5. File extensions</A> for the full list of file extensions. 
<P><A NAME="0028">
<A HREF="#0022" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0027" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0029" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H5>Example (file extension entries in xm.cfg):</H5>

<P><PRE>&nbsp;&nbsp;&nbsp;-def&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;def
&nbsp;&nbsp;&nbsp;-mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;mod
&nbsp;&nbsp;&nbsp;-oberon&nbsp;&nbsp;=&nbsp;ob2
&nbsp;&nbsp;&nbsp;-sym&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;sym
</PRE>

<P><HR>
<A NAME="0029">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0028" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0030" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>Customizing compiler messages</H2>

<P>The file <TT>xm.msg</TT> contains texts of error messages in the form 
<P><TT>&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;text</TT> 
<P>The following is an extract from xm.msg: 
<P><PRE>001&nbsp;illegal&nbsp;character
002&nbsp;comment&nbsp;not&nbsp;closed;&nbsp;started&nbsp;at&nbsp;line&nbsp;%d
...
042&nbsp;incompatible&nbsp;assignment
...
</PRE>

<P>Some messages contain format specifiers for additional arguments. In the above example, the message 002 contains a <TT>%d</TT> specifier used to print a line number. 
<P>To use a language other than English for compiler messages it is sufficient to translate xm.msg, preserving error numbers and the order of format specifiers. 
<P><HR>
<A NAME="0030">
<A HREF="#0013" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0029" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0031" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H2>XDS and your C compiler</H2>

<P>XDS-C can be used as a translator or compiler. In the first case, the C code generated by <TT>xm</TT> will be used for further development or will be ported to another platform. In the second case, <TT>xm</TT> is used as first pass of compilation process; to get an executable program a C compiler must be used. A C compiler, linker, or make utility may be invoked <A HREF="#0032" TARGET=body>seamlessly</A> 
<P>Usually, you have to configure <TT>xm</TT> for your C compiler only once and then <TT>xm</TT> will do everything to get your program ready for execution. 
<P><UL>
<LI><A HREF="#0031" TARGET=body>Building the run-time library</A>
<LI><A HREF="#0032" TARGET=body>Configuring XDS for seamless compilation</A>
</UL>
<P><HR>
<A NAME="0031">
<A HREF="#0030" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0030" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="#0032" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>Building the run-time library</H3>

<P>The XDS run-time library is included in an XDS package in C source form, i.e. for each library module its header file and C source file are provided. For Unix platforms, a pre-built library file containing object files may be included. This is not the case for the Windows platform, because different C compilers support different calling and naming conventions. We recommend to build the library file for your C compiler or several library files for various C compilers or memory models. The <TT>LIB/C</TT> subdirectory or your XDS installation contains makefiles which can be used for that purpose. It may be necessary to change a C compiler name or compiler options in this file. 
<P><HR>
<A NAME="0032">
<A HREF="#0030" TARGET=body><IMG ALT="Super" SRC="super.gif" BORDER=0></A>
<A HREF="#0031" TARGET=body><IMG ALT="Prev" SRC="prev.gif" BORDER=0></A>
<A HREF="xm004.html#0033" TARGET=body><IMG ALT="Next" SRC="next.gif" BORDER=0></A></A>
<BR>
<H3>Configuring XDS for seamless compilation</H3>

<P>We will use the term <I>seamless compilation</I> if xm is configured to call a C compiler, linker or make implicitly to prepare an executable for your program. A makefile can be produced after successful completion of a project and a make utility can be implicitly called then to compile and link your program. 
<P>The compiler uses a template file (See <A HREF="xm004.html#0054" TARGET=body>Template files</A>) to generate a makefile. The XDS distribution contains the <TT>xds.tem</TT> template file, which can be used for various C compilers. The equation <B>ENV_TARGET</B> determines a target platform, i.e. a file system, including a representation of a file name, C compiler to use, its options, etc. By default, the value of this equation is equal to the value of the <B>ENV_HOST</B> equation. The configuration file <TT>xm.cfg</TT> contains a list of supported platform, i.e. list of names, that can be used as a value of <B>ENV_TARGET</B> equation. We recommend to set the value of the equation in the beginning of the configuration file. It may be necessary to change some settings for your platform or append a new platform. All changes should be done in <TT>xm.cfg</TT> and <TT>xds.tem</TT> files. 
<P>Note, in the current version it is not possible to append a new platform with DOS-like file system. We recommend to change settings for platform &quot;MSDOS&quot;, &quot;OS2&quot; and &quot;WinNT&quot; if necessary. 
<P>See <A HREF="xm002.html#0010" TARGET=body>Building a program</A> for more information. 
<P>
</BODY>
</HTML>
